---
title: Lorem Ipsum
description: Lorem ipsum dolor sit amet
created: !!timestamp '2014-02-25 00:00:00'
---
{% mark content -%}

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent in leo id quam tincidunt sollicitudin sed eu tortor. Nulla metus ligula, luctus in enim vel, pharetra egestas erat. Donec tincidunt a nibh id convallis. Morbi libero nisi, ultrices nec diam quis, bibendum pulvinar magna. Ut sed hendrerit nulla. Fusce elementum eleifend auctor. Sed neque turpis, rutrum eu commodo vel, commodo ut elit. Nulla sit amet augue in velit euismod scelerisque eget nec est. In aliquet ultrices quam, sit amet scelerisque nibh ultricies vitae. Donec iaculis magna et urna tristique egestas. Curabitur ac mi a sem tempus sodales in sed tellus. Fusce dignissim arcu vitae cursus pulvinar.

{% syntax java -%}

package org.exoplatform.component.test;

import java.util.HashMap;
import java.util.Map;
import java.util.concurrent.atomic.AtomicLong;

import junit.framework.TestSuite;

import org.exoplatform.container.PortalContainer;
import org.exoplatform.container.component.RequestLifeCycle;


public class AbstractKernelTest extends AbstractGateInTest {
    private static KernelBootstrap bootstrap;
    private static final Map<Class<?>, AtomicLong> counters = new HashMap<Class<?>, AtomicLong>();

    protected AbstractKernelTest() {
        super();
    }

    protected AbstractKernelTest(String name) {
        super(name);
    }

    public PortalContainer getContainer() {
        return bootstrap != null ? bootstrap.getContainer() : null;
    }

    protected void begin() {
	// bootstrap == null nên getContainer() cũng return null
        RequestLifeCycle.begin(getContainer());
    }

    protected void end() {
        RequestLifeCycle.end();
    }

    @Override
    protected void beforeRunBare() {
        Class<?> key = getClass();

        if (!counters.containsKey(key)) {
            counters.put(key, new AtomicLong(new TestSuite(getClass()).testCount()));

            // có lỗi ở đây. bootstrap ko thể khởi tạo đc nên bị gán = null
            bootstrap = new KernelBootstrap(Thread.currentThread().getContextClassLoader());

            // Configure ourselves
            bootstrap.addConfiguration(getClass());

            bootstrap.boot();
        }
    }

    @Override
    protected void afterRunBare() {
        Class<?> key = getClass();
        
        if (counters.get(key).decrementAndGet() == 0) {
            bootstrap.dispose();
            bootstrap = null;
        }
    }
}
{%- endsyntax %}

Sed et turpis lacus. In id ipsum hendrerit, facilisis orci ac, pellentesque lacus. Phasellus dictum id magna sit amet euismod. Mauris interdum semper est, ut fringilla tortor tincidunt eu. Donec quis commodo lorem, at dignissim mauris. Cras at quam volutpat, dignissim elit eu, sagittis lectus. Donec purus ante, volutpat lobortis felis at, ultricies laoreet elit. Cras faucibus bibendum magna at consequat. Proin ac orci eu nisi faucibus vulputate sed ac mi. Cras tincidunt, justo posuere tristique imperdiet, lectus nunc luctus mi, ut facilisis purus nisi ac ante. Aliquam in consequat tellus. Aenean in diam tempor, eleifend nulla in, semper lectus. Maecenas lobortis magna dictum tortor varius fringilla. Ut pretium massa aliquam nibh vestibulum feugiat. Proin euismod justo diam, nec condimentum diam auctor et. Donec semper erat metus, cursus porttitor eros faucibus eu.

Quisque tempus vehicula diam, nec blandit felis gravida rutrum. Duis pellentesque posuere convallis. Nulla eu metus sit amet ante iaculis viverra in id odio. Suspendisse potenti. Praesent tempus dui vehicula nulla pulvinar sagittis. Suspendisse potenti. Etiam hendrerit sapien lacus, non blandit velit viverra nec. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.

{%- endmark %}
